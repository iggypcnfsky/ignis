@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
  /* Fonts */
  --font-ui: var(--font-dm-sans);
  --font-display: var(--font-caprasimo);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-dm-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

html, body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-ui, system-ui), ui-sans-serif, system-ui, -apple-system,
    Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Utility for display font (use next/font variable directly to avoid var indirection) */
.font-display {
  font-family: var(--font-caprasimo, serif), ui-serif, Georgia, Cambria, "Times New Roman",
    Times, serif !important;
}

/* Scrollbar (dark, transparent track) */
* {
  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 9999px;
  border: 2px solid transparent;
  background-clip: content-box;
}

/* Animation keyframes for home page */
@keyframes slideUpFade {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeOutFast {
  from {
    opacity: 1;
    transform: translateY(0px);
  }
  to {
    opacity: 0;
    transform: translateY(15px);
  }
}

/* Enhanced scroll snap for magnetic behavior */
html {
  scroll-behavior: smooth;
}

body {
  overscroll-behavior: none;
}

/* Ensure main scroll container has proper snap behavior (homepage only) */
#problems-scroll-container {
  scroll-snap-type: y mandatory !important;
  scroll-padding: 0 !important;
  scroll-behavior: auto !important;
  -webkit-overflow-scrolling: touch !important;
  overscroll-behavior: none !important;
  touch-action: pan-y !important;
  position: relative !important;
  z-index: 1 !important;
}

/* Apply snap properties only to homepage slides */
#problems-scroll-container > * {
  scroll-snap-align: start !important;
  scroll-snap-stop: always !important;
  min-height: 100vh !important;
  scroll-margin: 0 !important;
}

/* Force hardware acceleration for smoother scrolling */
#problems-scroll-container > * {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Ensure no gaps between slides - only for home page */
#problems-scroll-container {
  gap: 0 !important;
}

#problems-scroll-container > * {
  margin: 0 !important;
  gap: 0 !important;
}

/* Override for problem detail pages to allow proper gaps */
main.problem-detail-page .grid {
  gap: 1rem !important; /* 16px gap on mobile */
}

@media (min-width: 1024px) {
  main.problem-detail-page .grid {
    gap: 1.5rem !important; /* 24px gap on desktop */
  }
}

/* Mobile-specific scroll fixes */
@media screen and (max-width: 768px) {
  #problems-scroll-container {
    -webkit-overflow-scrolling: touch !important;
    overflow-scrolling: touch !important;
    scroll-behavior: auto !important;
    touch-action: pan-y !important;
  }
  
  #problems-scroll-container > * {
    touch-action: pan-y !important;
  }

  /* Ensure horizontal image galleries don't hijack vertical scroll */
  .hide-scrollbar {
    touch-action: pan-x pinch-zoom !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Prevent horizontal scroll from interfering with main vertical scroll */
  .hide-scrollbar::-webkit-scrollbar {
    display: none !important;
  }

  /* Ensure main page scroll takes priority */
  main.problem-detail-page {
    touch-action: pan-y !important;
    overflow-y: auto !important;
  }

  /* Fix for main demo pages - ensure scroll works properly */
  #problems-scroll-container {
    touch-action: pan-y !important;
    overscroll-behavior-y: none !important;
    scroll-snap-type: y mandatory !important;
  }

  /* Ensure clickable areas don't interfere with scroll */
  #problems-scroll-container a {
    touch-action: pan-y !important;
    pointer-events: auto !important;
  }

  /* Force scroll behavior on mobile */
  #problems-scroll-container > article {
    touch-action: pan-y !important;
    pointer-events: none !important;
  }

  #problems-scroll-container > article > a {
    pointer-events: auto !important;
    touch-action: pan-y !important;
  }
}

/* Hide scrollbar utility */
.scrollbar-hide {
  -ms-overflow-style: none !important;  /* Internet Explorer 10+ */
  scrollbar-width: none !important;  /* Firefox */
  scrollbar-color: transparent transparent !important;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none !important;  /* Safari and Chrome */
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}

.scrollbar-hide::-webkit-scrollbar-track {
  display: none !important;
  background: transparent !important;
}

.scrollbar-hide::-webkit-scrollbar-thumb {
  display: none !important;
  background: transparent !important;
}

/* Specific override for meetups page scrolling elements */
main.scrollbar-hide,
main.scrollbar-hide * {
  -ms-overflow-style: none !important;
  scrollbar-width: none !important;
  scrollbar-color: transparent transparent !important;
}

main.scrollbar-hide::-webkit-scrollbar,
main.scrollbar-hide *::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}
