@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
  /* Fonts */
  --font-ui: var(--font-dm-sans);
  --font-display: var(--font-caprasimo);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-dm-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

html, body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-ui, system-ui), ui-sans-serif, system-ui, -apple-system,
    Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Utility for display font (use next/font variable directly to avoid var indirection) */
.font-display {
  font-family: var(--font-caprasimo, serif), ui-serif, Georgia, Cambria, "Times New Roman",
    Times, serif !important;
}

/* Scrollbar (dark, transparent track) */
* {
  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 9999px;
  border: 2px solid transparent;
  background-clip: content-box;
}

/* Animation keyframes for home page */
@keyframes slideUpFade {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeOutFast {
  from {
    opacity: 1;
    transform: translateY(0px);
  }
  to {
    opacity: 0;
    transform: translateY(15px);
  }
}

/* Enhanced scroll snap for magnetic behavior */
html {
  scroll-behavior: smooth;
}

body {
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

/* Ensure main scroll container has proper snap behavior (homepage only) */
#problems-scroll-container {
  scroll-snap-type: y mandatory !important;
  scroll-padding: 0 !important;
  scroll-behavior: smooth !important;
}

/* Force instant scroll behavior */
main * {
  scroll-behavior: auto !important;
}

/* Magnetic snap behavior (homepage only) */
#problems-scroll-container {
  scroll-snap-type: y mandatory !important;
  scroll-snap-stop: always !important;
  scroll-behavior: auto !important;
}

/* Apply snap properties only to homepage slides */
#problems-scroll-container > * {
  scroll-snap-align: start !important;
  scroll-snap-stop: always !important;
  min-height: 100vh !important;
  scroll-margin: 0 !important;
}

/* Force hardware acceleration for smoother scrolling */
main > *, #problems-scroll-container > * {
  will-change: scroll-position;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Ensure no gaps between slides - only for home page */
#problems-scroll-container {
  gap: 0 !important;
}

#problems-scroll-container > * {
  margin: 0 !important;
  gap: 0 !important;
}

/* Override for problem detail pages to allow proper gaps */
main.problem-detail-page .grid {
  gap: 1rem !important; /* 16px gap on mobile */
}

@media (min-width: 1024px) {
  main.problem-detail-page .grid {
    gap: 1.5rem !important; /* 24px gap on desktop */
  }
}

/* Prevent momentum scrolling on iOS */
@media screen and (max-width: 768px) {
  main {
    -webkit-overflow-scrolling: auto;
  }
}

/* Force instant snap behavior on all browsers */
* {
  -ms-scroll-snap-type: y mandatory;
  -ms-scroll-snap-stop: always;
}
